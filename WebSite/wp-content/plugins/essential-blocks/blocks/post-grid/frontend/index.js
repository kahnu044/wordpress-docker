(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.apiFetch;var r=e.n(t);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var n=!!EssentialBlocksLocalize&&EssentialBlocksLocalize.rest_rootURL;function o(e){if(document.getElementsByClassName("ebpg-pagination").length>0){var t=document.querySelectorAll(".ebpg-pagination button");t.length>0&&(document.querySelectorAll(".ebpostgrid-pagination").forEach((function(e){s(e)})),t.forEach((function(t){var a=1;t.addEventListener("click",(function(){var t=this,n=i(this,"ebpg-pagination-button"),o=i(this,"ebpg-pagination-item-previous"),l=i(this,"ebpg-pagination-item-next");a=n?parseInt(a)+1:o?parseInt(c(this))-1:l?parseInt(c(this))+1:parseInt(this.dataset.pagenumber);var p=this.closest(".eb-post-grid-wrapper");if(p){var d=p.dataset,g=e||"",u=JSON.parse(d.attributes),b=null!=u&&u.version?null==u?void 0:u.version:"";r()({path:"essential-blocks/v1/queries?query_data=".concat(d.querydata,"&attributes=").concat(d.attributes).concat(g,"&pageNumber=").concat(a)}).then((function(e){if(n)if(e)if("v2"===b){var r=t.closest(".eb-post-grid-wrapper").querySelector(".eb-post-grid-posts-wrapper");r&&r.insertAdjacentHTML("beforeend",e)}else t.closest(".ebpostgrid-pagination")&&t.closest(".ebpostgrid-pagination").insertAdjacentHTML("beforebegin",e);else t.closest(".ebpostgrid-pagination").insertAdjacentHTML("beforebegin",'<p class="eb-no-posts">No more Posts</p>'),t.closest(".ebpostgrid-pagination").innerHTML="";else{if(t.closest(".eb-post-grid-wrapper").querySelectorAll(".ebpg-grid-post").forEach((function(e){e.remove()})),"v2"===b){var a=t.closest(".eb-post-grid-wrapper").querySelector(".eb-post-grid-posts-wrapper");a&&(a.innerHTML=e)}else t.closest(".ebpostgrid-pagination")&&t.closest(".ebpostgrid-pagination").insertAdjacentHTML("beforebegin",e);i(t,"ebpg-pagination-item")&&(t.closest(".ebpostgrid-pagination").querySelectorAll(".ebpg-pagination-item").forEach((function(e){e.classList.remove("active")})),t.classList.add("active")),s(t.closest(".ebpostgrid-pagination"))}}))}}))})))}}function i(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}function s(e){var t=e.querySelector(".ebpg-pagination-item.active");if(t){var r=parseInt(t.dataset.pagenumber),a=e.querySelectorAll(".ebpg-pagination-item"),n=a.length,o=1;a.forEach((function(e){o=parseInt(e.dataset.pagenumber),function(e){e.classList.remove("show"),e.classList.add("hide")}(e),(1===r&&o<=3||o>=r&&o<=r+2||o===n||1===o&&(r>=n-2||r>=4))&&function(e){e.classList.remove("hide"),e.classList.add("show")}(e)}));var i=e.querySelectorAll(".ebpg-pagination-item-separator");i.length>0&&i.forEach((function(e){e.remove()}));var s='<button class="ebpg-pagination-item-separator">...</button>';r<a.length-2&&a[a.length-1].insertAdjacentHTML("beforebegin",s),(r>=n-2||n>4&&r>=4)&&a[1].insertAdjacentHTML("afterend",s),1===r?(e.querySelector(".ebpg-pagination-item-previous").disabled=!0,e.querySelector(".ebpg-pagination-item-next").disabled=!1):r===n?(e.querySelector(".ebpg-pagination-item-previous").disabled=!1,e.querySelector(".ebpg-pagination-item-next").disabled=!0):(e.querySelector(".ebpg-pagination-item-previous").disabled=!1,e.querySelector(".ebpg-pagination-item-next").disabled=!1)}}function c(e){var t,r=1,a=null===(t=e.closest(".ebpostgrid-pagination"))||void 0===t?void 0:t.querySelector(".ebpg-pagination-item.active");if(a){if(r=a.dataset?a.dataset.pagenumber:1,i(e,"ebpg-pagination-item-next")){for(var n=a.nextElementSibling;n&&!n.classList.contains("ebpg-pagination-item");)n=n.nextElementSibling;n.classList.add("active"),a.classList.remove("active")}else if(i(e,"ebpg-pagination-item-previous")){for(var o=a.previousElementSibling;o&&!o.classList.contains("ebpg-pagination-item");)o=o.previousElementSibling;o.classList.add("active"),a.classList.remove("active")}s(e.closest(".ebpostgrid-pagination"))}return r}r().use(r().createRootURLMiddleware(n)),window.addEventListener("DOMContentLoaded",(function(){o("")})),window.addEventListener("DOMContentLoaded",(function(e){var t,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}(document.getElementsByClassName("eb-post-grid-category-filter"));try{var i=function(){var e=t.value,a=e.dataset.ebpgtaxonomy;e.querySelectorAll(".ebpg-category-filter-list li").forEach((function(e){e.addEventListener("click",(function(e){var t,n=this,i=e.target.getAttribute("data-ebpgCategory");t="all"===i?"&query_type=filter":"&taxonomy=".concat(a,"&category=").concat(i);var s=this.closest(".eb-post-grid-wrapper").dataset,c=JSON.parse(s.attributes),l=null!=c&&c.version?null==c?void 0:c.version:"";r()({path:"essential-blocks/v1/queries?query_data=".concat(s.querydata,"&attributes=").concat(s.attributes).concat(t),parse:!1}).then((function(e){var a=e.headers.get("X-WP-Total");if(a){var i=new FormData;i.append("action","post_grid_block_pagination"),i.append("post_grid_pagination_nonce",EssentialBlocksLocalize.post_grid_pagination_nonce),i.append("querydata",null==s?void 0:s.querydata),i.append("attributes",null==s?void 0:s.attributes),i.append("totalPosts",a),fetch(EssentialBlocksLocalize.ajax_url,{method:"POST",body:i}).then((function(e){return e.text()})).then((function(e){var r=n.closest(".eb-post-grid-wrapper").querySelector(".ebpostgrid-pagination");if(r)r.innerHTML=e;else{var a=document.createElement("div");a.className="ebpostgrid-pagination ebpg-pagination ",a.innerHTML=e,n.closest(".eb-post-grid-wrapper").appendChild(a)}o(t)})).catch((function(e){return console.log(e)})),r()({path:"essential-blocks/v1/queries?query_data=".concat(s.querydata,"&attributes=").concat(s.attributes).concat(t)}).then((function(e){if(n.closest(".eb-post-grid-wrapper").querySelectorAll(".ebpg-grid-post").forEach((function(e){e.remove()})),n.closest(".eb-post-grid-wrapper").querySelector("p")&&n.closest(".eb-post-grid-wrapper").querySelector("p").remove(),"v2"===l){var t=n.closest(".eb-post-grid-wrapper").querySelector(".eb-post-grid-posts-wrapper");if(t)t.innerHTML=e;else{var r=document.createElement("div");r.className="eb-post-grid-posts-wrapper",r.innerHTML=e,n.closest(".eb-post-grid-category-filter").insertAdjacentHTML("afterend",r.outerHTML)}}else n.closest(".eb-post-grid-category-filter").insertAdjacentHTML("afterend",e);n.closest(".eb-post-grid-category-filter").querySelectorAll(".ebpg-category-filter-list-item").forEach((function(e){e.classList.remove("active")})),n.classList.add("active")}))}else n.closest(".eb-post-grid-category-filter").querySelectorAll(".ebpg-category-filter-list-item").forEach((function(e){e.classList.remove("active")})),n.classList.add("active"),n.closest(".eb-post-grid-wrapper").querySelectorAll(".ebpg-grid-post").forEach((function(e){e.remove()})),n.closest(".eb-post-grid-wrapper").querySelector(".ebpostgrid-pagination")&&(n.closest(".eb-post-grid-wrapper").querySelector(".ebpostgrid-pagination").innerHTML=""),n.closest(".eb-post-grid-wrapper").querySelector("p")&&n.closest(".eb-post-grid-wrapper").querySelectorAll("p").forEach((function(e){e.remove()})),n.closest(".eb-post-grid-wrapper").insertAdjacentHTML("beforeend","<p>No Posts Found</p>")}),(function(e){console.log("error",e)}))}))}))};for(n.s();!(t=n.n()).done;)i()}catch(e){n.e(e)}finally{n.f()}}))})();