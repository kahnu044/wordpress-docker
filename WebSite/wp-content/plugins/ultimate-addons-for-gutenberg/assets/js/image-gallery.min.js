let spectraImageGalleryLoadStatus=!0;const UAGBImageGalleryMasonry={init(r,e){let l=2;const o=window.innerHeight/1.25,n=document.querySelector(e),s=n?.querySelector(".spectra-image-gallery__control-loader"),t=n?.querySelector(".spectra-image-gallery__control-button");r.feedPagination&&r.paginateUseLoader?window.addEventListener("scroll",function(){let e=n?.querySelector(".spectra-image-gallery__media-wrapper");var a,t=(e=e||n).lastElementChild.getBoundingClientRect().top+window.scrollY;window.pageYOffset+o>=t&&(t={page_number:l},a=r.gridPages,spectraImageGalleryLoadStatus&&(l>a&&(s.style.display="none"),l<=a&&(UAGBImageGalleryMasonry.callAjax(n,t,r,!1,l),l++,spectraImageGalleryLoadStatus=!1)))}):r.feedPagination&&!r.paginateUseLoader&&(t.onclick=function(){var e=r.gridPages,a={total:e,page_number:l};t.classList.toggle("disabled"),spectraImageGalleryLoadStatus&&l<=e&&(UAGBImageGalleryMasonry.callAjax(n,a,r,!0,l),l++,spectraImageGalleryLoadStatus=!1)})},createElementFromHTML(e){const a=document.createElement("div");e=e.replace(/\s+/gm," ").replace(/( )+/gm," ").trim();return a.innerHTML=e,a},getCustomURL(e,a){const t=new RegExp("^((http|https)://)(www.)?[a-zA-Z0-9@:%._\\+~#?&//=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%._\\+~#?&//=]*)$");e=parseInt(e.getAttribute("data-spectra-gallery-image-id"));return t.test(a?.customLinks[e])?a.customLinks[e]:void 0},openCustomURL(e){window.open(e,"_blank")},addClickEvents(e,t){const a=e?.querySelectorAll(".spectra-image-gallery__media-wrapper");a.forEach(e=>{const a=UAGBImageGalleryMasonry.getCustomURL(e,t);a&&(e.style.cursor="pointer",e.addEventListener("click",()=>UAGBImageGalleryMasonry.openCustomURL(a)))})},callAjax(r,l,o,n=!1,s){const e=new FormData;e.append("action","uag_load_image_gallery_masonry"),e.append("nonce",uagb_image_gallery.uagb_image_gallery_masonry_ajax_nonce),e.append("page_number",l.page_number),e.append("attr",JSON.stringify(o)),fetch(uagb_image_gallery.ajax_url,{method:"POST",credentials:"same-origin",body:e}).then(e=>e.json()).then(function(e){let a=r?.querySelector(".spectra-image-gallery__layout--masonry");a=a||r;const t=new Isotope(a,{itemSelector:".spectra-image-gallery__media-wrapper--isotope",stagger:10});t.insert(UAGBImageGalleryMasonry.createElementFromHTML(e.data)),imagesLoaded(a).on("progress",function(){t.layout()}),o.customLinks&&UAGBImageGalleryMasonry.addClickEvents(a,o),(spectraImageGalleryLoadStatus=!0)===n&&r?.querySelector(".spectra-image-gallery__control-button").classList.toggle("disabled"),s===parseInt(l.total)&&(r.querySelector(".spectra-image-gallery__control-button").style.opacity=0,setTimeout(()=>{r.querySelector(".spectra-image-gallery__control-button").parentElement.style.display="none"},2e3))})}},UAGBImageGalleryPagedGrid={init(l,e){let o=1;const n=document.querySelector(e),s=n?.querySelectorAll(".spectra-image-gallery__control-arrows--grid"),a=n?.querySelectorAll(".spectra-image-gallery__control-dot");for(let e=0;e<s.length;e++)s[e].addEventListener("click",e=>{const a=e.currentTarget;let t=o;switch(a.getAttribute("data-direction")){case"Prev":--t;break;case"Next":++t}n?.querySelector(".spectra-image-gallery__media-wrapper")||n;var e=l.gridPages,r={page_number:t,total:e};t===e||1===t?a.disabled=!0:s.forEach(e=>{e.disabled=!1}),t<=e&&1<=t&&(UAGBImageGalleryPagedGrid.callAjax(n,r,l,s),o=t)});for(let e=0;e<a.length;e++)a[e].addEventListener("click",e=>{const a=e.currentTarget;var e=a.getAttribute("data-go-to"),t=(n?.querySelector(".spectra-image-gallery__media-wrapper")||n,{page_number:e,total:l.gridPages});UAGBImageGalleryPagedGrid.callAjax(n,t,l,s),o=e})},createElementFromHTML(e){const a=document.createElement("div");e=e.replace(/\s+/gm," ").replace(/( )+/gm," ").trim();return a.innerHTML=e,a},getCustomURL(e,a){const t=new RegExp("^((http|https)://)(www.)?[a-zA-Z0-9@:%._\\+~#?&//=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%._\\+~#?&//=]*)$");e=parseInt(e.getAttribute("data-spectra-gallery-image-id"));return t.test(a?.customLinks[e])?a.customLinks[e]:void 0},openCustomURL(e){window.open(e,"_blank")},addClickEvents(e,t){const a=e?.querySelectorAll(".spectra-image-gallery__media-wrapper");a.forEach(e=>{const a=UAGBImageGalleryPagedGrid.getCustomURL(e,t);a&&(e.style.cursor="pointer",e.addEventListener("click",()=>UAGBImageGalleryPagedGrid.openCustomURL(a)))})},callAjax(o,n,s,i){const e=new FormData;e.append("action","uag_load_image_gallery_grid_pagination"),e.append("nonce",uagb_image_gallery.uagb_image_gallery_grid_pagination_ajax_nonce),e.append("page_number",n.page_number),e.append("attr",JSON.stringify(s)),fetch(uagb_image_gallery.ajax_url,{method:"POST",credentials:"same-origin",body:e}).then(e=>e.json()).then(function(a){if(!1!==a.success){let e=o?.querySelector(".spectra-image-gallery__layout--isogrid");const t=(e=e||o).querySelectorAll(".spectra-image-gallery__media-wrapper--isotope"),r=new Isotope(e,{itemSelector:".spectra-image-gallery__media-wrapper--isotope",layoutMode:"fitRows"}),l=(t.forEach(e=>{r.remove(e),r.layout()}),r.insert(UAGBImageGalleryPagedGrid.createElementFromHTML(a.data)),imagesLoaded(e).on("progress",function(){r.layout()}),s.customLinks&&UAGBImageGalleryPagedGrid.addClickEvents(e,s),1===parseInt(n.page_number)?i.forEach(e=>{e.disabled="Prev"===e.getAttribute("data-direction")}):parseInt(n.page_number)===parseInt(n.total)?i.forEach(e=>{e.disabled="Next"===e.getAttribute("data-direction")}):i.forEach(e=>{e.disabled=!1}),o?.querySelector(".spectra-image-gallery__control-dot--active").classList.toggle("spectra-image-gallery__control-dot--active"),o?.querySelectorAll(".spectra-image-gallery__control-dot"));l[parseInt(n.page_number)-1].classList.toggle("spectra-image-gallery__control-dot--active")}})}};